<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <!-- ============================= -->
  <!--       Document Metadata       -->
  <!-- ============================= -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="color-scheme" content="dark light" />
  <title>Nicholas Falletta — Software Developer</title>
  <meta name="description" content="Portfolio of Nicholas Falletta — software engineer & designer building intuitive, accessible products." />
  <link rel="canonical" href="https://nick-falletta.dev/" />
  <meta property="og:title" content="Nicholas Falletta — Software Developer" />
  <meta property="og:description" content="Portfolio of Nicholas Falletta — software engineer & designer building intuitive, accessible products." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="assets/img/og-cover.png" />
  <meta name="theme-color" content="#0f766e" />

  <!-- ============================= -->
  <!--              CSS              -->
  <!-- ============================= -->
  <style>
    /* ================================
              DESIGN SYSTEM
      ================================ */
    :root {
      --bg: #0b0f10;
      --panel: #0e1416;
      --text: #ffffff;
      --muted: #b9b9b9;
      --brand: #0f766e;
      --brand-2: #14b8a6;
      --ring: #22c55e;
      --code: #0b1a1f;
      --header-h: 64px;
      --shadow: 0 8px 30px rgba(0,0,0,.35);
      --ocean-surface: hsl(195, 94%, 50%);
      --ocean-mid: hsl(195 100% 15%);
      --ocean-deep: hsl(200 100% 0%);
      --ocean-snow: hsl(190 12% 82% / .6);
      --ocean-plank: hsl(160 60% 55% / .35);
      --ocean-bubble: hsl(190 100% 96% / .9);
    }
    /*
    @media (prefers-color-scheme: light) {
      :root {
        --bg: #f8faf9;
        --panel: #ffffff;
        --text: #111827;
        --muted: #475569;
        --brand: #0f766e;
        --brand-2: #0ea5a4;
        --ring: #0ea5a4;
        --code: #f1f5f9;
        --shadow: 0 10px 30px rgba(2, 12, 27, .08);
      }
    } /*

    /* ================================
                BASE / RESET
      ================================ */
    *, *::before, *::after { box-sizing: border-box; }
    html { scroll-behavior: smooth; background: transparent;}
    html:focus-within { scroll-behavior: smooth; }
    body{ height: 100%; margin: 0; font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji"; color: var(--text); padding-top: var(--header-h); }
    
    img { max-width: 100%; height: auto; display: block; }
    a { color: var(--brand-2); text-decoration: none; }
    a:hover { text-decoration: underline; }
    code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .container { width: min(1100px, 92%); margin-inline: auto; }

    html, body {
      min-height: 100%;
      overflow-x: hidden;
      overscroll-behavior-y: none;
    }

    /* ================================
              OCEAN BACKGROUND
      ================================ */
    #ocean-canvas { position: fixed; left: 0; top: 0px; width: 100vw; height: 100vh; z-index: -1; pointer-events: none; }

    #ocean-top { overflow: hidden; position: relative; height: 240px; background: linear-gradient(to top, rgb(134, 226, 250) 0%, var(--ocean-surface) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 80%, rgba(0,0,0,0) 100%); -webkit-mask-repeat: no-repeat; -webkit-mask-size: 100% 100%; mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 80%, rgba(0,0,0,0) 100%); mask-repeat: no-repeat; mask-size: 100% 100%; }
    #ocean-top .waves { position: absolute; inset: 0; top: 80px; width: calc(100% + 100px); height: 100%; -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 60%, rgba(0,0,0,0) 100%); mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 60%, rgba(0,0,0,0) 100%); pointer-events: none; }
    .waves-back { z-index: 1; }
    #boat-wrap { z-index: 2; }
    .waves-front { z-index: 3; }

    /* ================================
                    BOAT
      ================================ */
    #boat-wrap { position: absolute; top: 70px; right: 20px; pointer-events: none; }
    #boat-img { width: 300px; animation: boatBob 5s ease-in-out infinite, boatTilt 8s ease-in-out infinite; filter: drop-shadow(0 6px 14px rgba(0,0,0,.3)); }
    @media (prefers-reduced-motion: reduce) { #boat-img, .waves .layer, .waves .bob { animation: none !important; } }

    /* ================================
                    FISH
      ================================ */
    .fish{width:200px;height:auto;max-width:none;will-change:transform,filter,opacity}
    .fish-swim { position: fixed; width: 200px; height: auto; will-change: transform, top, left; z-index: 5; animation: wiggle .6s infinite ease-in-out;}
    #boat-catch{position:absolute;bottom:15px;left:-95px;display:flex;flex-direction:column-reverse;align-items:flex-start;pointer-events:none}
    #boat-catch .fish.stack{position:absolute;transform:translateY(calc(var(--i,0)*-10px)) rotate(var(--tilt,0deg))}
    .on-hook-rot{position:absolute;top:10px;right:-80px;transition:transform 0.25s ease;will-change:transform}
    .fish.on-hook{position:relative;transform:translate(-50%,-10%);animation:wiggle 1.2s ease-in-out infinite}
    @keyframes wiggle{0%,100%{transform:translate(-50%,-10%) rotate(5deg)}50%{transform:translate(-50%,-14%) rotate(10deg)}}


    /* ================================
                  WAVES
      ================================ */
    .waves .layer use { fill: var(--c); }
    .waves .waveA use { opacity: .75; }
    .waves .waveB use { opacity: .55; }
    .waves .waveC use { opacity: .38; }
    @keyframes tiltA { 0% { transform: rotate(0.3deg);} 100% { transform: rotate(-0.3deg);} }
    @keyframes tiltB { 0% { transform: rotate(-0.4deg);} 100% { transform: rotate(0.4deg);} }
    @keyframes tiltC { 0% { transform: rotate(0.2deg);} 100% { transform: rotate(-0.2deg);} }
    @keyframes bobA { 0%,100% { transform: translateY(0);} 50% { transform: translateY(9px);} }
    @keyframes bobB { 0%,100% { transform: translateY(0);} 50% { transform: translateY(6px);} }
    @keyframes bobC { 0%,100% { transform: translateY(0);} 50% { transform: translateY(3px);} }
    .waves .waveA { animation: tiltA 8s ease-in-out infinite alternate; }
    .waves .waveB { animation: tiltB 10s ease-in-out infinite alternate; }
    .waves .waveC { animation: tiltC 12s ease-in-out infinite alternate; }
    .waves .waveA .bob { animation: bobA 6s ease-in-out infinite alternate; }
    .waves .waveB .bob { animation: bobB 7s ease-in-out infinite alternate; }
    .waves .waveC .bob { animation: bobC 8s ease-in-out infinite alternate; }


    /* ================================
              BOAT ANIMATIONS
      ================================ */
    @keyframes boatBob { 0%,100% { transform: translateY(0);} 50% { transform: translateY(-15px);} }
    @keyframes boatTilt { 0%,100% { transform: rotate(0deg);} 50% { transform: rotate(-1.5deg);} }


    /* ================================
                HOOK + LINE
      ================================ */
    #hook-wrap { position: fixed; top: 250px; right: 10px; width: 30px; height: auto; pointer-events: none; z-index: 4; transform: translateY(0); max-height: 200px; }
    #hook-wrap, #hook-line { opacity: 1; transition: opacity 0.2s ease-in-out; }
    #hook-wrap.hidden, #hook-line.hidden { opacity: 0; }
    #hook-line { position: fixed; inset: 0; pointer-events: none; z-index: 4; overflow: hidden;}
    @keyframes lineShimmer { 0% { stroke-dashoffset: 20;} 100% { stroke-dashoffset: 0;} }


    /* ================================
                DEPTH METER
      ================================ */
    #depth-meter { position: fixed; top: -10px; right: 20px; display: inline-flex; align-items: center; padding: 6px 12px; border-radius: 12px; background: rgba(50, 50, 50, 0.6); color: #fff; font-size: 0.95rem; font-weight: 500; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); z-index: 10; transition: opacity .35s ease, transform .35s ease; opacity: 0; transform: translateY(-6px); }
    #depth-meter.is-visible { opacity: 1; transform: translateY(0); }

    /* ---------------------- 
       Accessibility: Skip Link
       ---------------------- */
    .skip-link { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
    .skip-link:focus { position: fixed; left: 1rem; top: 1rem; width: auto; height: auto; padding: .6rem 1rem; background: var(--brand); color: white; border-radius: .6rem; z-index: 11; }

    /* ================================
      Header / Navigation (desktop + mobile)
      ================================ */
    header { position:fixed; top:0; left:0; right:0; z-index:10; backdrop-filter:saturate(180%) blur(8px); background:color-mix(in hsl, var(--bg) 75%, transparent); border-bottom:1px solid color-mix(in hsl, var(--muted) 20%, transparent); height:var(--header-h); }
    .nav { display:flex; align-items:center; justify-content:space-between; gap:1rem; height:var(--header-h); }
    .brand { display:flex; align-items:center; gap:.8rem; font-weight:700; letter-spacing:.2px; color:var(--text); text-decoration:none; }
    .brand-avatar { width:36px; height:36px; border-radius:50%; outline:2px solid color-mix(in hsl, var(--brand) 60%, white); box-shadow:var(--shadow); }
    .nav ul { display:flex; gap:.6rem; list-style:none; margin:0; padding:0; }
    .nav a.link { padding:.45rem .8rem; border-radius:.6rem; color:var(--text); text-decoration:none; }
    .nav a.link[aria-current="true"], .nav a.link:hover { background:color-mix(in hsl, var(--brand) 18%, transparent); }
    .nav-cta { display:flex; align-items:center; gap:.6rem; }
    .nav-cta .btn { outline:none; padding:.42rem .75rem; border-radius:.5rem; font-weight:500; }

    /* ================================
      Burger + Mobile Menu :focus-within
      ================================ */
    .menu-toggle { outline:none; display:flex; flex-direction:column; justify-content:space-between; width:28px; height:20px; background:none; border:none; cursor:pointer; padding:0; transition:transform .3s ease; }
    .menu-toggle .bar { height:3px; width:100%; background:var(--text); border-radius:3px; transition:all .3s ease; }
    .menu-toggle.active .bar:nth-child(1) { transform:rotate(45deg) translate(5px,5px); }
    .menu-toggle.active .bar:nth-child(2) { opacity:0; }
    .menu-toggle.active .bar:nth-child(3) { transform:rotate(-45deg) translate(5px,-5px); }

    @media (min-width: 1101px) {
      #menu { display:flex !important; position: static; flex-direction: row; gap: .6rem; height: auto; opacity: 1; transform: none; overflow: visible; }
      .menu-toggle { display:none !important; }
      #nav-scrim { display:none !important; }
    }

    @media (max-width: 1100px) {
      .container.nav { position: static; }
      #menu { position: fixed; top: var(--header-h); left: 0; right: 0; z-index: 11; background: color-mix(in hsl, var(--bg) 88%, transparent); border-bottom: 1px solid color-mix(in hsl, var(--muted) 20%, transparent); box-shadow: 0 10px 30px rgba(0,0,0,.25); display: block; padding: 0 1rem; height: 0; overflow: hidden; opacity: 0; transform: translateY(-4px); transition: height .28s ease, opacity .2s ease, transform .2s ease; }
      #menu .link { display:block; padding: 14px 0; line-height: 1.4; }
      #menu .nav-cta-mobile { display:flex; gap:.6rem; margin: .4rem 0 1rem; }
      #menu .nav-cta-mobile .btn { outline:none; flex:1; text-align:center; border-radius:.8rem; padding:.8rem 1rem; }
      #nav-scrim { position: fixed; inset: var(--header-h) 0 0 0; background: rgba(0,0,0,.45); opacity: 0; pointer-events: none; transition: opacity .2s ease; z-index: 10; }
      #nav-scrim.show { opacity:.5; pointer-events:auto; }
    }

    /* Mobile menu links */
    #menu .link { display:block; padding:.5rem 1rem; margin:.25rem 0; line-height:1.35; }

    /* Mobile CTAs */
    #menu .nav-cta-mobile { display:flex; flex-direction:column; gap:.7rem; margin:1rem 0 1.2rem; padding:0; }
    #menu .nav-cta-mobile .btn { outline:none; display:block; width:100%; text-align:center; border-radius:.9rem; padding:.5rem 1rem; font-weight:600; box-shadow:var(--shadow); }

    /* Cleaner button styles */
    #menu .nav-cta-mobile .btn.ghost { outline:none; background:color-mix(in hsl, var(--bg) 50%, transparent); border:1px solid var(--brand); color:var(--brand); }
    #menu .nav-cta-mobile .btn { outline:none; background:var(--brand); color:#fff; border:none; }

    /* Scrim */
    #nav-scrim { position:fixed; inset:var(--header-h) 0 0 0; background:rgba(0,0,0,.45); opacity:0; pointer-events:none; transition:opacity .25s ease; z-index:10; }
    #nav-scrim.show { opacity:.5; pointer-events:auto; }
    body.menu-open { overflow:hidden; }

    /* Desktop menu alignment */
    @media (min-width:1100px) {
      #menu { display:flex !important; align-items:center; gap:.8rem; position:static; height:auto; opacity:1; transform:none; overflow:visible; }
      #menu > li { display:flex; align-items:center; }
      .nav a.link { display:inline-flex; align-items:center; padding:.6rem .9rem; line-height:1; }
      .nav-cta { display:flex; gap:.6rem; }
      .nav-cta .btn { outline:none; padding:.45rem .8rem; border-radius:.6rem; font-weight:500; }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      #menu { transition:none !important; transform:none !important; }
      #nav-scrim { transition:none !important; }
    }

    /* ---------------------- 
       Hero Section
       ---------------------- */
    .hero { padding: 0 0 1.2rem; }
    .tag { display: inline-flex; align-items: center; gap: .5rem; padding: .25rem .55rem; border-radius: .8rem; background: color-mix(in hsl, var(--brand) 50%, transparent); color: var(--brand-2); font-weight: 600; font-size: .9rem; }
    .hero-grid { display: grid; grid-template-columns: 1.2fr .8fr; gap: 2rem; align-items: center; }
    .hero h1 { font-size: clamp(1.5rem, 4.5vw, 3rem); line-height: 1.1; margin: 0.4rem 0 0.6rem; letter-spacing: .3px; }
    .hero p.lede { color: var(--muted); font-size: clamp(1rem, 2.4vw, 1.15rem); margin: 0 0 1.2rem; }
    .hero-cta { display: flex; gap: .6rem; flex-wrap: wrap; }
    .btnIcon { outline:none; transition: transform .2s; }
    .btnIcon:hover { transform: scale(1.1); }
    .hero-cta img { width: 50px; height: 50px; display: block; }

    /* Stats */
    .stats { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 1rem; margin-top: 1.2rem; text-align: center; }
    .stat { background: var(--panel); padding: 1rem; border-radius: .8rem; border: 1px solid color-mix(in hsl, var(--muted) 20%, transparent); text-align: center; }
    .stat strong { display: block; font-size: 1.4rem; }
    @media (max-width: 550px) { .stats { grid-template-columns: 1fr; } }

    /* ---------------------- 
       Hero Image Slider
       ---------------------- */
    .portrait { width: 100%; border-radius: .8rem; border: 1px solid color-mix(in hsl, var(--muted) 20%, transparent); box-shadow: var(--shadow); transform: translateZ(0); }
    .hero-visual { width: 100%; }
    .hero-slider { position: relative; border-radius: .8rem; border: 1px solid color-mix(in hsl, var(--muted) 20%, transparent); box-shadow: var(--shadow); overflow: clip; background: #0a1113; }
    .hero-slider .slides { position: relative; aspect-ratio: 16 / 10; }
    .hero-slider .slide { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0; transform: scale(1.02); transition: opacity .6s ease, transform .6s ease; will-change: opacity, transform; }
    .hero-slider .slide.is-active { opacity: 1; transform: scale(1); }
    @media (prefers-reduced-motion: reduce) { .hero-slider .slide { transition: none; } }
    .slider-controls { position: absolute; inset: 0; display: flex; align-items: center; justify-content: space-between; pointer-events: none; }
    .slide-btn { pointer-events: auto; background: color-mix(in hsl, var(--bg) 40%, transparent); color: var(--text); border: 1px solid color-mix(in hsl, var(--muted) 30%, transparent); width: 40px; height: 40px; border-radius: 50%; margin: 0 .6rem; display: grid; place-items: center; cursor: pointer; transition: background-color .2s ease, border-color .2s ease, transform .2s ease; }
    .slide-btn:hover { filter: brightness(1.05); }
    .slider-dots { position: absolute; left: 0; right: 0; bottom: .6rem; display: flex; gap: .4rem; justify-content: center; align-items: center; }
    .slider-dots .dot { width: 12px; height: 12px; border-radius: 999px; background: color-mix(in hsl, var(--muted) 40%, transparent); border: 1px solid color-mix(in hsl, var(--muted) 50%, transparent); cursor: pointer; }
    .slider-dots .dot.is-active { width: 20px; background: var(--brand); border-color: var(--brand-2); }
    @media (max-width: 1000px) { .hero-slider .slides { aspect-ratio: 16 / 9; } }

    /* ---------------------- 
       Section scaffolding (shared)
       ---------------------- */
    section { padding: 4rem 0; scroll-margin-top: 84px; }
    section header h2 { font-size: clamp(1.4rem, 3vw, 2rem); margin: 0 0 .4rem; }
    section header p { color: var(--muted); margin: 0 0 1.4rem; }

    /* ---------------------- 
       Projects Grid & Cards
       ---------------------- */
    .projects { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 1.2rem; }
    .cardContainer { transition: transform .2s }
    .cardContainer:hover { transform: scale(1.02); }
    .card { min-height: 450px; transition: transform .2s; background: color-mix(in oklab, var(--panel) 70%, transparent); backdrop-filter: saturate(130%) blur(6px); border-radius: 1rem; overflow: clip; border: 1px solid color-mix(in hsl, var(--muted) 22%, transparent); display: grid; grid-template-rows: auto 1fr auto; }
    .card-media { aspect-ratio: 16/10; background: #0a1113; display: grid; place-items: center; overflow: hidden; }
    .card-media img { width: 100%; height: 100%; object-fit: fill; will-change: transform; }
    .card-body { padding: 1rem; }
    .card-title { display: flex; align-items: center; justify-content: space-between; gap: .6rem; }
    .chip { display: inline-flex; align-items: center; padding: .1rem .5rem; border-radius: .45rem; background: color-mix(in hsl, var(--brand) 18%, transparent); color: var(--brand-2); font-size: .8rem; }
    .card p { color: var(--muted); margin: .4rem 0 .8rem; }
    .card-actions { display: flex; gap: .5rem; padding: 0 1rem 1rem; }
    @media (max-width: 1000px) { .projects { grid-template-columns: repeat(2, minmax(0,1fr)); } .hero-grid { grid-template-columns: 1fr; } }
    @media (max-width: 640px) { .projects { grid-template-columns: 1fr; } }

    /* ---------------------- 
       Experience Timeline
       ---------------------- */
    .timeline { position: relative; margin: 2rem 0; }
    .timeline::before { content: ""; position: absolute; left: 12px; top: 0; bottom: 0; width: 2px; background: color-mix(in hsl, var(--muted) 25%, transparent); }
    .t-item { position: relative; margin-left: 2.5rem; padding: 1rem 1rem 1rem 1.2rem; border-left: 2px solid transparent; }
    .t-item::before { content: ""; position: absolute; left: -5px; top: 1.2rem; width: 10px; height: 10px; border-radius: 50%; background: var(--brand); box-shadow: 0 0 0 3px color-mix(in hsl, var(--brand) 25%, transparent); }
    .t-head { display: flex; flex-wrap: wrap; gap: .6rem 1rem; align-items: baseline; }
    .t-role { color: var(--brand-2); font-weight: 600; }
    .t-meta { color: var(--muted); font-size: .95rem; }

    /* ---------------------- 
       Info card
       ---------------------- */
    .info-card { background: color-mix(in oklab, var(--panel) 70%, transparent); backdrop-filter: saturate(130%) blur(6px); border: 1px solid color-mix(in hsl, var(--muted) 22%, transparent); border-radius: .8rem; padding: 1rem; }

    /* ---------------------- 
      Skills 
      ---------------------- */
    .skills-controls{display:flex;gap:.8rem;align-items:center;margin-bottom:1rem;}
    .segmented{display:inline-flex;background:color-mix(in hsl,var(--panel) 80%,transparent);border:1px solid color-mix(in hsl,var(--muted) 25%,transparent);border-radius:.8rem;padding:.25rem;box-shadow:var(--shadow);}
    .seg-btn{appearance:none;border:0;background:transparent;color:var(--text);padding:.55rem 1rem;border-radius:.6rem;font-weight:700;cursor:pointer;transition:background .18s ease,transform .08s ease,box-shadow .18s ease;}
    .seg-btn:hover{text-decoration: underline;}
    .seg-btn.is-active{background:color-mix(in hsl,var(--brand) 22%,transparent);box-shadow:inset 0 0 0 1px var(--brand);}
    .skills-legend{display:flex;flex-wrap:wrap;gap:.8rem 1.2rem;margin-bottom:.6rem;color:var(--muted);font-size:.95rem;}
    .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:.4rem;}
    .dot-adv{background:hsl(190 95% 45%);}
    .dot-prof{background:hsl(190 70% 60%);}
    .dot-fam{background:hsl(190 35% 70%);}
    .skill-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1rem;}
    @media (max-width:1000px){.skill-grid{grid-template-columns:repeat(2,minmax(0,1fr));}}
    @media (max-width:600px){.skill-grid{grid-template-columns:1fr;}}
    .skill-card{position:relative;display:grid;grid-template-columns:96px 1fr;gap:1rem;background:color-mix(in oklab,var(--panel) 72%,transparent);border:1px solid color-mix(in hsl,var(--muted) 22%,transparent);border-radius:.9rem;padding:1rem;align-items:center;box-shadow:var(--shadow);transition:transform .18s ease,border-color .2s ease,background .2s ease;}
    .skill-card:hover{transform:translateY(-2px);}
    .skill-card:focus-within{outline:none;}
    .ring{width:96px;height:96px;position:relative;}
    .ring svg{width:100%;height:100%;display:block;}
    .ring .bg{stroke:color-mix(in hsl,var(--muted) 30%,transparent);stroke-width:12;fill:none;}
    .ring .fg{fill:none;stroke-linecap:round;stroke-width:12;filter:drop-shadow(0 2px 6px rgba(0,0,0,.35));transition:stroke-dashoffset .9s ease,filter .3s ease;}
    @media (prefers-reduced-motion:reduce){.ring .fg{transition:none;}}
    .ring .center{position:absolute;inset:0;display:grid;place-items:center;font-weight:800;font-size:.95rem;color:var(--text);}
    .skill-meta{height: 100%; display: flex;flex-direction: column;justify-content: space-between;}
    .skill-meta h3{margin:0 0 .2rem;font-size:1.05rem;}
    .skill-meta p{margin:0;color:var(--muted);font-size:.95rem;}
    .skill-tags{display:flex;flex-wrap:wrap;gap:.4rem;margin-top:.55rem;}
    .skill-tag{font-size:.8rem;padding:.15rem .4rem;border-radius:.4rem;background:color-mix(in hsl,var(--brand) 14%,transparent);color:var(--brand-2);}
    .skill-card::after{content:\"\";position:absolute;inset:0;pointer-events:none;background:radial-gradient(circle at 20% 20%,color-mix(in hsl,var(--ocean-bubble) 50%,transparent) 0%,transparent 35%),radial-gradient(circle at 80% 65%,color-mix(in hsl,var(--ocean-bubble) 35%,transparent) 0%,transparent 45%);opacity:0;transition:opacity .2s ease;border-radius:inherit;}
    .skill-card:hover::after{opacity:.35;}
    .sr-only{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;}
    .sr-live{position:absolute;left:-9999px;}

    /* ---------------------- 
       Education
       ---------------------- */
    .edu { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 1rem; }
    @media (max-width: 820px) { .edu { grid-template-columns: 1fr; } }

    /* ---------------------- 
       Contact
       ---------------------- */
    .contact { display: grid; grid-template-columns: 1.1fr .9fr; gap: 1.2rem; align-items: stretch; }  
    .contact-list { display: grid; gap: .5rem; }  
    .row { display: flex; align-items: center; }
    .row strong { width: 80px; color: var(--muted); }
    .copy { margin-left: 8px; padding: .3rem .5rem; border: 1px solid color-mix(in hsl, var(--muted) 30%, transparent); background: transparent; color: var(--text); border-radius: .4rem; cursor: pointer;}
    .copy:hover { text-decoration: underline;}
    @media (max-width: 820px) { .contact { grid-template-columns: 1fr; } }

    /* ---------------------- 
       Section Titles
       ---------------------- */
    .sectionHeader p{color: var(--text);}

    .zone-title{display:flex; justify-content: space-between; flex-wrap: wrap; font-weight:800;letter-spacing:.8px;background-clip:text;-webkit-background-clip:text;color:transparent;-webkit-text-fill-color:transparent;text-shadow:0 1px 1px rgba(255,255,255,.65),0 3px 6px rgba(0,0,0,.4);}
    #home .zone-title{background-image:linear-gradient(180deg,#f2feff 0%,#baf7f5 35%,#ffffff 48%,#ffffff 52%,#74e0f0 60%,#12b9d6 100%);}
    #projects .zone-title{background-image:linear-gradient(180deg,#ecfeff 0%,#a8e6ff 35%,#ffffff 48%,#ffffff 52%,#4fb7f0 60%,#0a75c7 100%);}
    #experience .zone-title{background-image:linear-gradient(180deg,#f0f9ff 0%,#a7c8ff 35%,#ffffff 48%,#ffffff 52%,#4a76d9 60%,#102a6e 100%);}
    #skills .zone-title{background-image:linear-gradient(180deg,#f0fff4 0%,#baf6ce 35%,#ffffff 48%,#ffffff 52%,#39c072 60%,#0f3e23 100%);}
    #education .zone-title{background-image:linear-gradient(180deg,#fbf5ff 0%,#e3c9ff 35%,#ffffff 48%,#ffffff 52%,#8f5be6 60%,#3a0d6b 100%);}
    #contact .zone-title{background-image:linear-gradient(180deg,#f0fdfa 0%,#aef3e6 35%,#ffffff 48%,#ffffff 52%,#2dbca2 60%,#0b2b29 100%);}
    @media (max-width: 350px) { .zone-title { flex-direction: column; align-items: flex-start; } }

    /* ---------------------- 
       Footer
       ---------------------- */
    footer { background: transparent; padding: 2rem 0 3rem; color: var(--muted); }

    /* ---------------------- 
       Focus styles / Motion / Print
       ---------------------- */
    :focus-visible { outline: 3px solid var(--ring); outline-offset: 2px; border-radius: 6px; }
    .reveal { opacity: 0; transform: translateY(8px); transition: opacity .6s ease, transform .6s ease; }
    .reveal.show { opacity: 1; transform: none; }
    @media print {
      header, .menu-toggle, .btn, .hero-cta, .nav-cta, .chip, .card-actions, .copy { outline:none; display: none !important; }
      body { background: white; color: black; }
      section { padding: 1rem 0; }
    }

  </style>

  <!-- Structured data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Nicholas Falletta",
      "jobTitle": "Software Developer",
      "url": "https://nick-falletta.dev/",
      "sameAs": [
        "https://github.com/Nick-Falletta",
        "https://www.linkedin.com/in/nick-falletta/"
      ]
    }
  </script>

</head>
<body>
  <!-- ============================= -->
  <!--           Header/Nav          -->
  <!-- ============================= -->
  <a class="skip-link" href="#main">Skip to content</a>

  <header>
    <div class="container nav" role="navigation" aria-label="Primary">
      <a class="brand" href="#">
        <img class="brand-avatar" src="assets/img/profile.png" alt="Nick Falletta avatar" />
        <span>Nick Falletta</span>
      </a>

      <!-- Burger button -->
      <button class="menu-toggle" aria-controls="menu" aria-expanded="false" id="menuBtn">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>

      <!-- Primary nav links + mobile CTAs -->
      <ul id="menu">
        <li><a class="link" href="#projects">Projects</a></li>
        <li><a class="link" href="#experience">Experience</a></li>
        <li><a class="link" href="#skills">Skills</a></li>
        <li><a class="link" href="#education">Education</a></li>
        <li><a class="link" href="#contact">Contact</a></li>
        <li class="nav-cta-mobile">
          <a class="btn ghost" href="assets/resume/Falletta_Resume.pdf" target="_blank" rel="noopener">Résumé</a>
        </li>
        <li class="nav-cta-mobile">
          <a class="btn" href="mailto:nickfalletta29@outlook.com">Contact me</a>
        </li>
      </ul>
      <div id="nav-scrim" aria-hidden="true"></div>
    </div>
  </header>

  <!-- ============================= -->
  <!--              Main             -->
  <!-- ============================= -->
  <main id="main">

    <section id="ocean-top" aria-hidden="true">
  <!-- BACK WAVES -->
  <svg class="waves waves-back" viewBox="0 0 2000 260" preserveAspectRatio="none" aria-hidden="true">
    <defs>
      <path id="w" d="M0,110 C130,130 260,90 390,110 C520,130 650,90 780,110 
      C910,130 1040,90 1170,110 C1300,130 1430,90 1560,110 C1690,130 1820,90 
      1950,110 L1950,260 L0,260 Z"/>
    </defs>

    <!-- Wave C -->
    <g class="layer waveC" style="--c: color-mix(in hsl, var(--ocean-mid) 55%, var(--ocean-deep) 45%);">
      <g class="bob">
        <use href="#w" x="0"></use>
        <use href="#w" x="2000"></use>
      </g>
    </g>

    <!-- Wave B -->
    <g class="layer waveB" style="--c: color-mix(in hsl, var(--ocean-surface) 55%, var(--ocean-mid) 45%);">
      <g class="bob">
        <use href="#w" x="0"></use>
        <use href="#w" x="2000"></use>
      </g>
    </g>
  </svg>

  <!-- BOAT -->
  <div id="boat-wrap">    
    <div id="boat-catch" aria-live="polite" aria-label="Catch bin"></div>
    <img id="boat-img" src="assets/img/kayak.png" alt="Boat"/>
  </div>

  <!-- FRONT WAVES -->
  <svg class="waves waves-front" viewBox="0 0 2000 260" preserveAspectRatio="none" aria-hidden="true">
    <defs>
      <path id="w2" d="M0,110 C130,130 260,90 390,110 C520,130 650,90 780,110 
      C910,130 1040,90 1170,110 C1300,130 1430,90 1560,110 C1690,130 1820,90 
      1950,110 L1950,260 L0,260 Z"/>
    </defs>

    <!-- Wave A  -->
    <g class="layer waveA" style="--c: color-mix(in hsl, var(--ocean-surface) 88%, var(--ocean-mid) 12%);">
      <g class="bob">
        <use href="#w2" x="0"></use>
        <use href="#w2" x="2000"></use>
      </g>
    </g>
  </svg>
</section>

<!-- HOOK -->
<div id="hook-wrap" class="hidden">
  <img id="hook-img" src="assets/img/hook.png" alt="Hook"/>

  <!-- Depth meter -->
  <div id="depth-meter" aria-live="polite">
    <span class="depth-value">0</span> m
  </div>
</div>
<!-- Fishing line -->
<svg id="hook-line" class="hidden" aria-hidden="true">
  <path id="hook-path"
        d=""
        fill="none"
        stroke="rgba(225,245,250,.85)"
        stroke-width="2.2"
        stroke-linecap="round"
        vector-effect="non-scaling-stroke"
        stroke-dasharray="6 6"
        style="animation: lineShimmer 3s linear infinite;"></path>
</svg>

  <!-- Ocean background -->
  <canvas id="ocean-canvas" aria-hidden="true"></canvas>

    <!-- ===== Hero ===== -->
    <section id="home" class="hero container">
      <div class="hero-grid">
        <!-- Surface Text -->
        <div class="sectionHeader">

          <h1 class="zone-title">The Surface<div>~0m</div></h1>
          <hr style="border-top: 5px dashed white; border-bottom: 0px">

          <h2>I'm Nick, wonderful to meet you!</h2>
          <p>
            Clarity, speed, and usability.  
            I’m a software engineer & designer who blends intuitive UX with robust code —  
            from accessibility tools and large-language-model projects to cross-platform mobile and web apps.
          </p>
          <div class="hero-cta reveal">
            <a class="btnIcon" href="https://github.com/Nick-Falletta" target="_blank" rel="noopener">
              <img src="assets/img/github.svg" alt="GitHub" loading="eager" />
            </a>
            <a class="btnIcon" href="https://www.linkedin.com/in/nick-falletta" target="_blank" rel="noopener">
              <img src="assets/img/linkedin.png" alt="LinkedIn" loading="eager" />
            </a>
          </div>

          <!-- Stats -->
          <div class="stats" aria-label="Highlights">
            <div class="info-card reveal" aria-live="polite">
              <strong>Full-Stack</strong> Development
            </div>
            <div class="info-card reveal"><strong>Web, iOS, Android</strong> Experience</div>
            <div class="info-card reveal"><strong>Accessibility</strong> first principles</div>
          </div>
        </div>

        <!-- Hero image slider -->
        <div class="hero-visual reveal">
          <div class="hero-slider" role="region" aria-label="Featured photos" tabindex="0">
            <div class="slides">
              <!-- Personal Images -->
              <img class="slide is-active" src="assets/img/NittanyLion.jpeg" alt="Nick with the Nittany Lion Statue" loading="eager" />
              <img class="slide" src="assets/img/vacation.jpeg" alt="Photo after a hike in Antigua" loading="lazy" />
              <img class="slide" src="assets/img/IST.jpeg" alt="IST event" loading="lazy" />
            </div>

            <!-- Slider controls -->
            <div class="slider-controls">
              <button class="slide-btn prev" type="button" aria-label="Previous image" title="Previous">&#10094;</button>
              <button class="slide-btn next" type="button" aria-label="Next image" title="Next">&#10095;</button>
            </div>

            <!-- Slider  dots -->
            <div class="slider-dots" role="tablist" aria-label="Choose image">
              <button class="dot is-active" role="tab" aria-selected="true" aria-label="Image 1"></button>
              <button class="dot" role="tab" aria-selected="false" aria-label="Image 2"></button>
              <button class="dot" role="tab" aria-selected="false" aria-label="Image 3"></button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== Projects ===== -->
    <section id="projects" aria-labelledby="projects-title">
      <div class="hero container">
        <div class="sectionHeader">
          <h1 class="zone-title">The Sunlight Zone<div>~100m</div></h1>
          <hr style="border-top: 5px dashed white; border-bottom: 0px">
          <p>Work visible in open waters — shipped apps, case studies, experiments.</p>
        </div>
        <div class="projects">

          <!-- Title Tracker -->
           <div class="cardContainer">
            <div class="card reveal">
              <div class="card-media">
                <img src="assets/img/titletracker.png" alt="Title Tracker app preview" loading="lazy" />
              </div>
              <div class="card-body">
                <div class="card-title">
                  <h3 style="margin:0">Title Tracker</h3>
                  <span class="chip">Flutter · Firebase</span>
                </div>
                <p>Workflow manager for Comm-Res Exams Corp. Realtime data, secure auth, and cross-platform delivery.</p>
              </div>
              <div class="card-actions">
                <a class="btn ghost" href="https://apps.apple.com/us/app/title-tracker/id6504823785" target="_blank" rel="noopener">iOS</a>
                <a class="btn ghost" href="https://play.google.com/store/apps/details?id=com.nicky.titletracker" target="_blank" rel="noopener">Android</a>
              </div>
            </div>
          </div>

          <!-- NaviGPT -->
           <div class="cardContainer">
            <article class="card reveal">
              <div class="card-media">
                <img src="assets/img/navigpt.png" alt="NaviGPT LiDAR navigation app" loading="lazy" />
              </div>
              <div class="card-body">
                <div class="card-title">
                  <h3 style="margin:0">NaviGPT</h3>
                  <span class="chip">Swift · LiDAR · OpenAI</span>
                </div>
                <p>Accessible navigation assistant for visually impaired users. LiDAR object detection, haptics, and AI guidance.</p>
              </div>
              <div class="card-actions">
                <a class="btn ghost" href="https://arxiv.org/pdf/2410.04005" target="_blank" rel="noopener">Paper</a>
                <a class="btn ghost" href="https://github.com/PSU-IST-CIL/NaviGPT/" target="_blank" rel="noopener">GitHub</a>
              </div>
            </article>
          </div>

          <!-- Kaizen -->
           <div class="cardContainer">
            <article class="card reveal">
              <div class="card-media">
                <img src="assets/img/kaizen.png" alt="Kaizen note converter prototype" loading="lazy" />
              </div>
              <div class="card-body">
                <div class="card-title">
                  <h3 style="margin:0">Kaizen</h3>
                  <span class="chip">React · Gemini · Python</span>
                </div>
                <p>Turns therapy sessions into concise, highlighted notes. Upload past sessions, organize by folder, export.</p>
              </div>
              <div class="card-actions">
                <a class="btn ghost" href="https://www.figma.com/proto/iZQ0xGy7zTffsi4Gv1Yi7W/TherAI?node-id=0-1" target="_blank" rel="noopener">Figma</a>
              </div>
            </article>
           </div>
        
          <!-- Jarvis -->
           <div class="cardContainer">
            <article class="card reveal">
              <div class="card-media">
                <img src="assets/img/jarvis.png" alt="Jarvis chatbot editing a website style live" loading="lazy" />
              </div>
              <div class="card-body">
                <div class="card-title">
                  <h3 style="margin:0">Jarvis</h3>
                  <span class="chip">React · OpenAI</span>
                </div>
                <p>Customizable AI chatbot with voice input and CSS live-editing. Context retention and personality presets.</p>
              </div>
              <div class="card-actions">
                <a class="btn ghost" href="https://github.com/Nick-Falletta/jarvis" target="_blank" rel="noopener">GitHub</a>
              </div>
            </article>
           </div>

          <!-- Multiple Choice Builder -->
           <div class="cardContainer">
            <article class="card reveal">
              <div class="card-media">
                <img src="assets/img/taggingQuestion.png" alt="Multiple choice builder interface" loading="lazy" />
              </div>
              <div class="card-body">
                <div class="card-title">
                  <h3 style="margin:0">Multiple-Choice Builder</h3>
                  <span class="chip">React · JSON</span>
                </div>
                <p>Author quizzes via JSON with instant feedback and image support; great for self-study & workshops.</p>
              </div>
              <div class="card-actions">
                <a class="btn ghost" href="https://github.com/Nick-Falletta/taggingQuestion" target="_blank" rel="noopener">GitHub</a>
              </div>
            </article>
           </div>

          <!-- ASCII Art Generator -->
           <div class="cardContainer">
            <article class="card reveal">
              <div class="card-media">
                <img src="assets/img/python_ascii.png" alt="Python Logo - ASCII Art" loading="lazy" />
              </div>
              <div class="card-body">
                <div class="card-title">
                  <h3 style="margin:0">ASCII Art Generator</h3>
                  <span class="chip">Python</span>
                </div>
                <p>Convert PNGs and JPGs into downloadable, customized ASCII art.</p>
              </div>
              <div class="card-actions">
                <a class="btn ghost" href="https://github.com/Nick-Falletta/ASCII_Art" target="_blank" rel="noopener">GitHub</a>
              </div>
            </article>
           </div>

          <!-- Java Image Processor -->
           <div class="cardContainer">
            <article class="card reveal">
              <div class="card-media">
                <img src="assets/img/imageProcessor.png" alt="Java Logo - Processed Image" loading="lazy" />
              </div>
              <div class="card-body">
                <div class="card-title">
                  <h3 style="margin:0">Image Processor</h3>
                  <span class="chip">Java</span>
                </div>
                <p>Image editing tool with upload, crop, brightness, contrast, and blur features. Save edited images directly to your PC.</p>
              </div>
              <div class="card-actions">
                <a class="btn ghost" href="https://github.com/Nick-Falletta/JavaImageProcessor" target="_blank" rel="noopener">GitHub</a>
              </div>
            </article>
           </div>
          <!-- Portfolio ChatBot -->
           <div class="cardContainer">
            <article class="card reveal">
              <div class="card-media">
                <img src="assets/img/nickChatBot.png" alt="Portfolio ChatBot Example" loading="lazy" />
              </div>
              <div class="card-body">
                <div class="card-title">
                  <h3 style="margin:0">Portfolio ChatBot</h3>
                  <span class="chip">Python · MongoDB · OpenAI API</span>
                </div>
                <p>An interactive LLM which answers questions about my education, experience, and projects by retrieving context from MongoDB.</p>
              </div>
              <div class="card-actions">
                <a class="btn ghost" href="https://github.com/Nick-Falletta/chat-with-nick" target="_blank" rel="noopener">GitHub</a>
              </div>
            </article>
           </div>
        </div>
      </div>
    </section>

    <!-- ===== Experience ===== -->
    <section id="experience" aria-labelledby="exp-title">
      <div class="hero container">
        <div class="sectionHeader">
          <h1 class="zone-title">The Twilight Zone<div>~600m</div></h1>
          <hr style="border-top: 5px dashed white; border-bottom: 0px">
          <p>Where light fades, responsibility grows, and skills deepen.</p>
        </div>
        <div class="timeline">

          <article class="t-item reveal">
            <div class="t-head">
              <h3 style="margin:0">RGTN Corporation B.V.</h3>
              <span class="t-role">Software Engineer Intern</span>
              <span class="t-meta">Aug 2025 — Present · New York, NY</span>
            </div>
            <ul>
              <li>Modernized infrastructure by migrating a Perl-based software into a containerized Python microservice using Docker, gRPC, Flask, & Helm, improving scalability & maintainability.</li>
              <li>Developed secure payment & database workflows by implementing webhook handlers, cryptographic signature verification, & transaction processing logic integrated with the Stripe API.</li>
              <li>Built an AI-powered assistant leveraging Microsoft Azure OpenAI for retrieval-augmented generation (RAG), with a modular Web Component front-end & a Node.js-based backend API grounded on Azure Blob Storage.</li>
              <li>Collaborated with external RGTN partners to define & align on API contracts, reducing integration overhead & accelerating development timelines.</li>
              <li>Upheld data security standards, ensuring full compliance with confidentiality agreements & data handling protocols for proprietary systems & third-party partnerships.</li>
            </ul>
          </article>

          <article class="t-item reveal">
            <div class="t-head">
              <h3 style="margin:0">Fundamentals of Computing Association</h3>
              <span class="t-role">Project Manager</span>
              <span class="t-meta">Aug 2023 — May 2025 · State College, PA</span>
            </div>
            <ul>
              <li>Cultivated leadership & mentorship skills by guiding students through semester-long technical projects, including a personality-based AI chatbot that modifies a website’s visual appearance.</li>
              <li>Fostered a collaborative & inclusive learning environment by organizing & leading weekly technical boot camps covering skills such as React.js, Full Stack development, GitHub workflows, & UI/UX principles.</li>
              <li>Inspired growth in peers by emphasizing problem-solving, creativity, & ownership in all projects, helping students apply classroom knowledge to impactful real-world solutions.</li>
            </ul>
          </article>

          <article class="t-item reveal">
            <div class="t-head">
              <h3 style="margin:0">Pennsylvania State University</h3>
              <span class="t-role">Software Developer Intern</span>
              <span class="t-meta">May — Dec 2024 · State College, PA</span>
            </div>
            <ul>
              <li>Developed a strong foundation in accessibility-focused design & user-centered research through collaboration with visually impaired users & academic professors.</li>
              <li>Honed problem-solving & team collaboration skills by working in weekly meetings with PhD students & professors to troubleshoot, refine, & iterate on each other's projects.</li>
              <li>Led the development of NaviGPT, an iOS application using Swift & OpenAI's API to help visually impaired users navigate safely.</li>
              <li>Researched & implemented best practices in AI & navigation by studying academic literature, ensuring the app effectively addressed real-world challenges in accessibility.</li>
            
            </ul>
          </article>

          <article class="t-item reveal">
            <div class="t-head">
              <h3 style="margin:0">Comm-Res Exams Corporation</h3>
              <span class="t-role">Software Developer Intern</span>
              <span class="t-meta">Dec 2022 — Apr 2023 · Mineola, NY</span>
            </div>
            <ul>
              <li>Strengthened project management & communication skills by collaborating closely with staff to align development with business needs.</li>
              <li>Gained hands-on experience refining company software & building scalable internal tools to enhance operational efficiency.</li>
              <li>Led the development of Title Tracker, a cross-platform mobile app built with Flutter & Firebase to streamline company workflow management & securely store company data in the cloud.</li>
              <li>Conducted interviews with employees to tailor the app’s design & functionality, effectively translating real-world needs into technical solutions.</li>            
            </ul>
          </article>
        </div>
      </div>
    </section>

    <!-- ===== Skills ===== -->
    <section id="skills" aria-labelledby="skills-title">
      <div class="hero container">
        <div class="sectionHeader">
          <h1 class="zone-title">The Midnight Zone<div>~2500m</div></h1>
          <hr style="border-top: 5px dashed white; border-bottom: 0px">
          <p>Tools and technologies honed under pressure.</p>
        </div>

        <!-- Controls -->
        <div class="skills-controls" role="group" aria-label="Skill filters">
          <div class="segmented" role="tablist" aria-label="Categories">
            <button class="seg-btn is-active" role="tab" aria-selected="true" data-cat="languages" id="tab-languages">Languages</button>
            <button class="seg-btn" role="tab" aria-selected="false" data-cat="frameworks" id="tab-frameworks">Frameworks</button>
            <button class="seg-btn" role="tab" aria-selected="false" data-cat="tools" id="tab-tools">Platforms &amp; Tools</button>
          </div>
        </div>

        <!-- Legend -->
        <div class="skills-legend" aria-hidden="true">
          <span><i class="dot dot-adv"></i> Advanced (80–100%)</span>
          <span><i class="dot dot-prof"></i> Proficient (60–79%)</span>
          <span><i class="dot dot-fam"></i> Familiar (40–59%)</span>
        </div>

        <!-- Grid -->
        <div id="skill-grid" class="skill-grid" role="tabpanel" aria-labelledby="tab-languages"></div>

        <!-- Live region for announcements -->
        <div class="sr-live" aria-live="polite" aria-atomic="true"></div>
      </div>
    </section>

    <!-- ===== Education ===== -->
    <section id="education" aria-labelledby="edu-title">
      <div class="hero container">
        <div class="sectionHeader">
          <h1 class="zone-title">The Abyss <div>~5000m</div></h1>
          <hr style="border-top: 5px dashed white; border-bottom: 0px">
          <p>The deep foundations that support everything above.</p>
        </div>
        <div class="edu">
          <article class="info-card reveal">
            <h3 style="margin-top:0">B.S. — Human Centered Design & Development</h3>
            <p class="muted">Pennsylvania State University - State College, PA</p>
            <ul>
              <li>Built full-stack applications with React, Java, and Python</li>
              <li>Applied UI/UX principles in Figma to design and prototype user-centric interfaces</li>
              <li>Implemented relational database systems with SQL and MongoDB and optimized queries for performance</li>
            </ul>
          </article>
          <article class="info-card reveal">
            <h3 style="margin-top:0">Smeal Business Fundamentals Certificate</h3>
            <p class="muted">Pennsylvania State University - State College, PA</p>
            <ul>
              <li>Applied data-driven decision making through business analytics case studies</li>
              <li>Gained foundations in financial reporting, accounting, and managerial finance</li>
              <li>Developed insights into marketing strategy and competitive positioning</li>
            </ul>
          </article>
        </div>
      </div>
    </section>

    <!-- ===== Contact ===== -->
    <section id="contact" aria-labelledby="contact-title">
      <div class="hero container">
        <div class="sectionHeader">
          <h1 class="zone-title" style="display: flex; justify-content: space-between;">The Trench<div>~8500m</div></h1>
          <hr style="border-top: 5px dashed white; border-bottom: 0px">
          <p>From the deepest depths, connections surface.</p>
        </div>
        <div class="contact">
          <div class="info-card reveal">
            <div class="contact-list" role="list">
              <div class="row" role="listitem"><strong>Email</strong> <a href="mailto:nickfalletta29@outlook.com">nickfalletta29@outlook.com</a> <button class="copy" data-copy="nickfalletta29@outlook.com" aria-label="Copy email">Copy</button></div>
              <div class="row" role="listitem"><strong>Phone</strong> <a href="tel:+16316375632">+1 (631) 637-5632</a> <button class="copy" data-copy="+16316375632" aria-label="Copy phone">Copy</button></div>
              <div class="row" role="listitem"><strong>GitHub</strong> <a href="https://github.com/Nick-Falletta" target="_blank" rel="noopener">Falletta-GitHub</a></div>
              <div class="row" role="listitem"><strong>LinkedIn</strong> <a href="https://www.linkedin.com/in/nick-falletta" target="_blank" rel="noopener">Falletta-LinkedIn</a></div>
            </div>
          </div>
          <div class="info-card reveal">
            <h3 style="margin-top:0">Why teams work with me</h3>
            <ul>
              <li>Blend of product sense and engineering rigor — think in systems, ship in iterations.</li>
              <li>Accessibility and performance aren’t afterthoughts; they’re the baseline.</li>
              <li>Clear communication, strong ownership, and empathy for users and teammates.</li>
            </ul>
            <p style="color:var(--muted)">Résumé available on request or via the button above.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- ============================= -->
  <!--             Footer            -->
  <!-- ============================= -->
  <footer>
    <div class="container">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap">
        <small>© <span id="year"></span> Nicholas Falletta. All rights reserved.</small>
        <small>Last updated <time id="updated"></time></small>
      </div>
    </div>
  </footer>

  <!-- ============================= -->
  <!--              JS               -->
  <!-- ============================= -->
  <script>
  /* =========================================================
    ONE SCROLL PIPELINE
    ========================================================= */
  (() => {
    const listeners = new Set();
    let lastY = window.scrollY || 0;
    let lastT = performance.now();
    let vSmoothed = 0;
    let ticking = false;

    const lerp = (a, b, t) => a + (b - a) * t;

    function tick(now) {
      ticking = false;
      const y  = window.scrollY || 0;
      const dt = Math.max(1, now - lastT);
      const dy = y - lastY;
      const v  = dy / dt;                 // px per ms
      vSmoothed = lerp(vSmoothed, v, 0.20);

      listeners.forEach(fn => fn({ y, dy, dt, v, vSmoothed }));

      lastY = y; lastT = now;
    }
    function schedule() {
      if (!ticking) { ticking = true; requestAnimationFrame(tick); }
    }

    addEventListener('scroll',     schedule, { passive: true });
    addEventListener('touchmove',  schedule, { passive: true });
    addEventListener('wheel',      schedule, { passive: true });
    addEventListener('resize',     schedule);

    window.__ScrollBus = {
      subscribe(fn) { listeners.add(fn); fn({ y: window.scrollY||0, dy:0, dt:16, v:0, vSmoothed }); return () => listeners.delete(fn); }
    };
  })();

  /* =========================================================
    MOBILE MENU
    ========================================================= */
  const menuBtn = document.getElementById('menuBtn');
  const menu    = document.getElementById('menu');
  const scrim   = document.getElementById('nav-scrim');
  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // init closed
  menu.style.display = 'none';
  menu.setAttribute('aria-hidden', 'true');
  menuBtn.setAttribute('aria-expanded', 'false');

  function lockScroll(lock) {
    document.body.classList.toggle('menu-open', lock);
    document.body.style.overflow = lock ? 'hidden' : '';
  }
  function openMenu() {
    menu.style.display = 'block';
    menu.style.height = 'auto';
    const target = menu.scrollHeight + 'px';
    menu.style.height = '0px';
    requestAnimationFrame(() => {
      if (prefersReduced) { menu.style.height = 'auto'; menu.style.opacity = '1'; menu.style.transform = 'none'; }
      else                { menu.style.height = target; menu.style.opacity = '1'; menu.style.transform = 'translateY(0)'; }
    });
    const onEnd = (e) => { if (e.propertyName === 'height') { menu.style.height = 'auto'; menu.removeEventListener('transitionend', onEnd); } };
    menu.addEventListener('transitionend', onEnd);

    menuBtn.classList.add('active');
    scrim.classList.add('show');
    menu.setAttribute('aria-hidden', 'false');
    menuBtn.setAttribute('aria-expanded', 'true');
    lockScroll(true);

    const firstLink = menu.querySelector('.link');
    firstLink && firstLink.focus({ preventScroll: true });
  }
  function closeMenu() {
    const current = getComputedStyle(menu).height;
    if (!prefersReduced) {
      menu.style.height = current;
      requestAnimationFrame(() => {
        menu.style.height = '0px';
        menu.style.opacity = '0';
        menu.style.transform = 'translateY(-4px)';
      });
    }
    const finish = () => { menu.style.display = 'none'; menu.removeEventListener('transitionend', finish); };
    prefersReduced ? finish() : menu.addEventListener('transitionend', finish);

    menuBtn.classList.remove('active');
    scrim.classList.remove('show');
    menu.setAttribute('aria-hidden', 'true');
    menuBtn.setAttribute('aria-expanded', 'false');
    lockScroll(false);
    menuBtn.focus({ preventScroll: true });
  }
  function isOpen() { return menuBtn.getAttribute('aria-expanded') === 'true'; }

  menuBtn.addEventListener('click', () => (isOpen() ? closeMenu() : openMenu()));
  scrim.addEventListener('click', closeMenu);
  window.addEventListener('keydown', (e) => { if (e.key === 'Escape' && isOpen()) closeMenu(); });

  // Close on nav link click (mobile only)
  document.querySelectorAll('#menu .link').forEach(a => {
    a.addEventListener('click', () => { if (window.matchMedia('(max-width: 899px)').matches) closeMenu(); });
  });

  // Reset state when switching to desktop size
  const mql = window.matchMedia('(min-width: 1100px)');
  mql.addEventListener('change', (e) => {
    if (e.matches) { // desktop
      menu.style.display = '';
      menu.style.height = '';
      menu.style.opacity = '';
      menu.style.transform = '';
      scrim.classList.remove('show');
      menu.setAttribute('aria-hidden', 'false');
      menuBtn.setAttribute('aria-expanded', 'false');
      document.body.classList.remove('menu-open');
      document.body.style.overflow = '';
    } else { // mobile
      menu.style.display = 'none';
      menu.style.height = '0px';
      menu.style.opacity = '0';
      menu.style.transform = 'translateY(-4px)';
      menu.setAttribute('aria-hidden', 'true');
    }
  });

  /* =========================================================
    ERO IMAGE SLIDER
    ========================================================= */
  (function initHeroSlider() {
    const slider = document.querySelector('.hero-slider');
    if (!slider) return;

    const slides = [...slider.querySelectorAll('.slide')];
    const dots   = [...slider.querySelectorAll('.dot')];
    const prevBtn = slider.querySelector('.slide-btn.prev');
    const nextBtn = slider.querySelector('.slide-btn.next');

    let index = slides.findIndex(s => s.classList.contains('is-active'));
    if (index < 0) index = 0;

    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const AUTOPLAY_MS = 5000; 
    let autoplayId = null;
    let paused = false;

    async function ensureDecoded(img) {
      if (img && 'decode' in img) { try { await img.decode(); } catch {} }
    }
    async function show(i) {
      slides[index].classList.remove('is-active');
      dots[index]?.classList.remove('is-active');
      dots[index]?.setAttribute('aria-selected', 'false');

      index = (i + slides.length) % slides.length;

      await ensureDecoded(slides[index]);
      slides[index].classList.add('is-active');
      dots[index]?.classList.add('is-active');
      dots[index]?.setAttribute('aria-selected', 'true');
    }
    function next() { show(index + 1); }
    function prev() { show(index - 1); }

    nextBtn?.addEventListener('click', () => { next(); restartAutoplay(); });
    prevBtn?.addEventListener('click', () => { prev(); restartAutoplay(); });
    dots.forEach((d, i) => {
      d.addEventListener('click', () => { show(i); restartAutoplay(); });
      d.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); show(i); restartAutoplay(); }
      });
    });

    slider.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') { next(); restartAutoplay(); }
      if (e.key === 'ArrowLeft')  { prev(); restartAutoplay(); }
    });
    slider.addEventListener('mouseenter', () => { paused = true; stopAutoplay(); });
    slider.addEventListener('mouseleave', () => { paused = false; restartAutoplay(); });
    slider.addEventListener('focusin',  () => { paused = true; stopAutoplay(); });
    slider.addEventListener('focusout', () => { paused = false; restartAutoplay(); });
    document.addEventListener('visibilitychange', () => { if (document.hidden) stopAutoplay(); else if (!paused) restartAutoplay(); });

    function startAutoplay() { if (prefersReduced || slides.length <= 1) return; stopAutoplay(); autoplayId = setInterval(next, AUTOPLAY_MS); }
    function stopAutoplay()  { if (autoplayId) clearInterval(autoplayId); autoplayId = null; }
    function restartAutoplay(){ if (paused || prefersReduced) return; startAutoplay(); }

    startAutoplay();
  })();

  /* =========================================================
    ACTIVE LINK HIGHLIGHTING ON SCROLL
    ========================================================= */
  const links = [...document.querySelectorAll('.nav a.link')];
  const sections = links.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);
  const setActive = (id) => { links.forEach(l => l.setAttribute('aria-current', l.getAttribute('href') === '#' + id)); };
  const io = new IntersectionObserver((entries) => { entries.forEach(e => { if (e.isIntersecting) setActive(e.target.id); }); }, { rootMargin: '-40% 0px -55% 0px', threshold: 0.01 });
  sections.forEach(s => io.observe(s));

  /* =========================================================
    REVEAL-ON-SCROLL
    ========================================================= */
  const revealEls = document.querySelectorAll('.reveal');
  const ro = new IntersectionObserver((entries) => {
    entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('show'); ro.unobserve(e.target); } });
  }, { threshold: 0.12 });
  revealEls.forEach(el => ro.observe(el));

  /* =========================================================
    SKILLS SECTION
    ========================================================= */
  (function initSkills() {
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const grid = document.getElementById('skill-grid');
    const tabs = [...document.querySelectorAll('.seg-btn')];

    const data = {
      languages: [
        { name:'Java', val: 90, tags:['OOP','Backend'] },
        { name:'Python', val: 80, tags:['Scripting','Data', 'LLM'] },
        { name:'TypeScript', val: 70, tags:['Web'] },
        { name:'JavaScript', val: 90, tags:['Web','Frontend'] },
        { name:'Swift', val: 60, tags:['iOS Dev'] },
        { name:'Dart', val: 80, tags:['Flutter'] },
        { name:'MySQL', val: 75, tags:['DB'] },
      ],
      frameworks: [
        { name:'React', val: 90, tags:['Web Dev'] },
        { name:'React Native', val: 85, tags:['Mobile Dev'] },
        { name:'Node.js', val: 90, tags:['Backend, APIs'] },
        { name:'Next.js', val: 50, tags:['Web Dev'] },
        { name:'Flutter', val: 80, tags:['Cross-platform Dev'] },
        { name:'Bootstrap', val: 80, tags:['UI'] },
        { name:'Tailwind', val: 70, tags:['UI'] },
        { name:'Angular', val: 40, tags:['Frontend'] }
      ],
      tools: [
        { name:'Xcode', val: 75, tags:['iOS Dev'] },
        { name:'Android Studio', val: 75, tags:['Android Dev'] },
        { name:'Firebase', val: 75, tags:['Auth','DB', 'Backend'] },
        { name:'MongoDB', val: 45, tags:['NoSQL'] },
        { name:'MySQL', val: 80, tags:['DB'] },
        { name:'GitHub', val: 90, tags:['Code Hosting'] },
        { name:'Figma', val: 90, tags:['UX'] },
        { name:'Docker', val: 80, tags:['Containerization'] }
      ]
    };

    let cat = 'languages';

    tabs.forEach(btn => {
      btn.addEventListener('click', () => {
        tabs.forEach(b => b.classList.toggle('is-active', b === btn));
        tabs.forEach(b => b.setAttribute('aria-selected', b === btn ? 'true' : 'false'));
        cat = btn.dataset.cat;
        render();
        grid.setAttribute('aria-labelledby', btn.id);
      });
      btn.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); btn.click(); } });
    });

    function sortDesc(items) { return items.slice().sort((a,b)=>b.val - a.val); }
    function abyssStops(val) {
      const t = Math.max(0, Math.min(100, val)) / 100;
      const h1 = 195, h2 = 210;
      const s1 = 80 - t*10, s2 = 70 - t*20;
      const l1 = 70 - t*30, l2 = 50 - t*32;
      return { c1: `hsl(${h1} ${s1}% ${l1}%)`, c2: `hsl(${h2} ${s2}% ${l2}%)` };
    }
    function ringSVG(val, idBase) {
      const r = 38, c = 2 * Math.PI * r;
      const off = c * (1 - Math.max(0, Math.min(100, val)) / 100);
      const uid = `${idBase}-${Math.random().toString(36).slice(2)}`;
      const { c1, c2 } = abyssStops(val);
      return `
        <svg viewBox="0 0 100 100" aria-hidden="true">
          <defs><linearGradient id="grad-${uid}" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0%"  stop-color="${c1}"/><stop offset="100%" stop-color="${c2}"/>
          </linearGradient></defs>
          <circle class="bg" cx="50" cy="50" r="${r}" />
          <circle class="fg" cx="50" cy="50" r="${r}"
            style="stroke-dasharray:${(2*Math.PI*r).toFixed(2)}; stroke-dashoffset:${prefersReduced?off.toFixed(2):(2*Math.PI*r).toFixed(2)}; stroke:url(#grad-${uid}); transform: rotate(-90deg); transform-origin: 50% 50%;" />
        </svg>
        <div class="center">${val}%</div>
      `;
    }
    const ringIO = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          const fg = e.target.querySelector('.fg');
          const r = 38, c = 2*Math.PI*r;
          const val = parseInt(e.target.dataset.val || '0', 10);
          const off = c * (1 - Math.max(0, Math.min(100, val)) / 100);
          if (fg) fg.style.strokeDashoffset = off.toFixed(2);
          ringIO.unobserve(e.target);
        }
      });
    }, { threshold: 0.4 });

    function cardHTML(item) {
      const tagHTML = (item.tags||[]).map(t => `<span class="skill-tag">${t}</span>`).join('');
      const level = item.val >= 80 ? 'Advanced' : item.val >= 60 ? 'Proficient' : 'Familiar';
      return `
        <article class="skill-card" tabindex="0" aria-label="${item.name}, ${level}, ${item.val} percent">
          <div class="ring" data-val="${item.val}">${ringSVG(item.val, item.name.toLowerCase().replace(/\s+/g,'-'))}</div>
          <div class="skill-meta">
            <h3>${item.name}</h3>
            <div class="skill-tags">${tagHTML}</div>
          </div>
        </article>
      `;
    }
    function render() {
      const items = sortDesc(data[cat] || []);
      grid.innerHTML = items.map(cardHTML).join('');
      grid.querySelectorAll('.ring').forEach(r => ringIO.observe(r));
    }
    render();
  })();

  /* =========================================================
    COPY-TO-CLIPBOARD
    ========================================================= */
  document.querySelectorAll('.copy').forEach(btn => {
    btn.addEventListener('click', async () => {
      try { await navigator.clipboard.writeText(btn.dataset.copy); btn.textContent = 'Copied'; setTimeout(() => btn.textContent = 'Copy', 1200); } catch {}
    })
  });

  /* =========================================================
    FOOTER METADATA
    ========================================================= */
  document.getElementById('year').textContent = new Date().getFullYear();
  const updated = new Date(document.lastModified);
  document.getElementById('updated').textContent = updated.toLocaleDateString(undefined, { year:'numeric', month:'short', day:'numeric'});

  /* =========================================================
    OCEAN BACKGROUND
    ========================================================= */
  (function initOcean() {
    const canvas = document.getElementById('ocean-canvas');
    if (!canvas) return;

    const ctx = canvas.getContext('2d', { alpha: true });
    let w = 0, h = 0;
    const isMobile = matchMedia('(max-width: 820px)').matches;
    const rawDpr = Math.max(1, devicePixelRatio || 1);
    const dpr = isMobile ? Math.min(1.25, rawDpr) : Math.min(1.75, rawDpr);

    // Scaled on mobile
    const SCALE = isMobile ? 0.5 : 1;
    const MAX_BUBBLES = Math.floor(50 * SCALE);
    const MAX_PLANK   = Math.floor(180 * SCALE);
    const MAX_SNOW    = Math.floor(240 * SCALE);

    const bubbles = [], plankton = [], snow = [];

    function resize() {
      w = canvas.clientWidth = innerWidth;
      h = canvas.clientHeight = innerHeight;
      canvas.width  = Math.floor(w * dpr);
      canvas.height = Math.floor(h * dpr);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    function rand(a, b){ return a + Math.random()*(b-a); }
    function clamp(v, a, b){ return Math.min(b, Math.max(a, v)); }
    function lerp(a, b, t){ return a + (b - a) * t; }

    function lerpHsl(hslA, hslB, t){
      const p = s => s.replace(/[^\d.\s]/g,'').trim().split(/\s+/).map(Number);
      const [h1,s1,l1] = p(hslA), [h2,s2,l2] = p(hslB);
      return `hsl(${lerp(h1,h2,t)} ${lerp(s1,s2,t)}% ${lerp(l1,l2,t)}%)`;
    }
    function depthFactor() {
      const max = Math.max(1, document.documentElement.scrollHeight - innerHeight);
      const raw = window.scrollY || 0;
      const clamped = Math.min(max, Math.max(0, raw));
      return clamped / max;
    }

    function seedParticles() {
      bubbles.length = 0; plankton.length = 0; snow.length = 0;
      for (let i=0;i<MAX_BUBBLES;i++) {
        bubbles.push({ x: rand(0,w), y: rand(h*0.5, h), r: rand(1, 3.5), vy: rand(-28, -10), wob: rand(0.4, 1.5), a: rand(0.2, 0.9) });
      }
      for (let i=0;i<MAX_PLANK;i++) {
        plankton.push({ x: rand(0,w), y: rand(0, h), r: rand(0.7, 1.8), vx: rand(-8, 8), vy: rand(-6, 6), tw: rand(2,5), a: rand(0.15, 0.45) });
      }
      for (let i=0;i<MAX_SNOW;i++) {
        snow.push({ x: rand(0,w), y: rand(0, h), r: rand(0.6, 1.4), vy: rand(6, 18), drift: rand(-4, 4), a: rand(0.12, 0.35) });
      }
    }

    let lastBG = '';
    function paintBackground(t) {
      const rs = getComputedStyle(document.documentElement);
      const top = lerpHsl(rs.getPropertyValue('--ocean-surface'), rs.getPropertyValue('--ocean-mid'), clamp(Math.pow(t, 0.6), 0, 1));
      const bottom = lerpHsl(rs.getPropertyValue('--ocean-mid'), rs.getPropertyValue('--ocean-deep'), clamp(Math.pow(t, 1.5), 0, 1));
      const gradient = `linear-gradient(180deg, ${top} 0%, ${bottom} 100%)`;
      if (gradient !== lastBG) {
        document.documentElement.style.background = gradient;
        document.documentElement.style.minHeight = '100dvh';
        document.body.style.background = 'transparent';
        lastBG = gradient;
      }
    }

    function drawParticles(t) {
      const bubblesPct = 1 - t;             
      const plankPct   = 1 - Math.abs(t-0.45)*2;
      const snowPct    = t;                  
      const bubbleN = Math.floor(MAX_BUBBLES * bubblesPct);
      const plankN  = Math.floor(MAX_PLANK * clamp(plankPct, 0, 1));
      const snowN   = Math.floor(MAX_SNOW * snowPct);
      const surfaceY = document.getElementById("ocean-top").offsetHeight; 

      ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--ocean-bubble').trim() || 'rgba(240,250,255,.9)';
      for (let i = 0; i < bubbleN; i++) {
        const b = bubbles[i];
        b.y += b.vy * 0.016;
        b.x += Math.sin((performance.now() / 1000 + i) * b.wob) * 0.6;
        if (b.y < surfaceY + 50) { b.y = h + rand(0, 60); b.x = rand(0, w); }
        const drawY = Math.max(b.y, surfaceY);
        ctx.globalAlpha = b.a; ctx.beginPath(); ctx.arc(b.x, drawY, b.r, 0, Math.PI * 2); ctx.fill();
      }

      ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--ocean-plank').trim() || 'rgba(120,255,180,.35)';
      for (let i=0;i<plankN;i++){
        const p = plankton[i];
        const tw = p.tw;
        p.x += (p.vx + Math.sin((performance.now()/600)+i)*tw) * 0.016;
        p.y += (p.vy + Math.cos((performance.now()/700)+i)*tw) * 0.016;
        if (p.x < -10) p.x = w+10; if (p.x > w+10) p.x = -10;
        if (p.y < -10) p.y = h+10; if (p.y > h+10) p.y = -10;
        ctx.globalAlpha = p.a; ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
      }

      ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--ocean-snow').trim() || 'rgba(200,220,230,.6)';
      for (let i=0;i<snowN;i++){
        const s = snow[i];
        s.y += s.vy * 0.016; s.x += s.drift * 0.008;
        if (s.y > h+6) { s.y = -6; s.x = rand(0,w); }
        ctx.globalAlpha = s.a; ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); ctx.fill();
      }
      ctx.globalAlpha = 1;
    }

    let raf = null, stopTimer = null;
    function frame() {
      raf = null;
      const t = depthFactor();
      paintBackground(t);
      ctx.clearRect(0, 0, w, h);
      drawParticles(t);
      if (stopTimer) clearTimeout(stopTimer);
      stopTimer = setTimeout(() => { /* stop until next scroll */ }, 250);
      raf = requestAnimationFrame(frame);
    }

    function kick() { if (!raf) raf = requestAnimationFrame(frame); }

    resize(); seedParticles(); paintBackground(depthFactor());
    addEventListener('resize', () => { resize(); seedParticles(); paintBackground(depthFactor()); });
    document.addEventListener('visibilitychange', () => { if (!document.hidden) kick(); });

    if (window.__ScrollBus) window.__ScrollBus.subscribe(kick);
  })();

  /* =========================================================
    FISHING HOOK + LINE
    ========================================================= */
  (function patchHookLine(){
    const boat = document.getElementById('boat-img');
    const hookWrap = document.getElementById('hook-wrap');
    const hookImg  = document.getElementById('hook-img');
    const lineSvg  = document.getElementById('hook-line');
    const linePath = document.getElementById('hook-path');
    if (!boat || !hookWrap || !hookImg || !lineSvg || !linePath || !window.__ScrollBus) return;

    const clamp = (n,a,b)=>Math.min(b,Math.max(a,n));

    function getBoatAnchor() { const r = boat.getBoundingClientRect(); return { x: r.left + r.width * .99, y: r.top + r.height * .08 }; }
    function getHookAttach() { const r = hookImg.getBoundingClientRect(); return { x: r.left + r.width * 0.85, y: r.top + r.height * 0.15 }; }

    function update({ y }) {
      const atTop = (y || 0) < 2;
      hookWrap.classList.toggle('hidden', atTop);
      lineSvg.classList.toggle('hidden', atTop);

      const extra = clamp(y * 0.07, 0, 350);
      hookWrap.style.transform = `translateY(${extra}px) translateZ(0)`;

      lineSvg.setAttribute('viewBox', `0 0 ${innerWidth} ${innerHeight}`);
      const A = getBoatAnchor();
      const B = getHookAttach();
      const sag = 5 + (extra * 0.012);
      const drift = Math.sin((performance.now()/1200)) * Math.min(24, 6 + extra * 0.02);
      const cp1 = { x: A.x + 10 + drift, y: A.y + Math.max(18, sag * 0.5) };
      const midY = (A.y + B.y) / 2 + sag;
      const cp2 = { x: B.x + drift * 0.4, y: midY };
      linePath.setAttribute('d', `M ${A.x},${A.y} C ${cp1.x},${cp1.y} ${cp2.x},${cp2.y} ${B.x},${B.y}`);
    }

    window.__ScrollBus.subscribe(update);
  })();

  /* =========================================================
    DEPTH POINTS
    ========================================================= */
  const DEPTH_POINTS = [
    { id: 'home',       depth: 0    },
    { id: 'projects',   depth: 100  },
    { id: 'experience', depth: 600  },
    { id: 'skills',     depth: 2500 },
    { id: 'education',  depth: 5000 },
    { id: 'contact',    depth: 8500 }
  ];
  let depthAnchors = [];

  function headerPx() {
    const h = getComputedStyle(document.documentElement).getPropertyValue('--header-h').trim();
    const n = parseFloat(h);
    return Number.isFinite(n) ? n : 64;
  }
  function sectionTitleTop(id) {
    const section = document.getElementById(id);
    if (!section) return 0;
    const title = section.querySelector('.zone-title');
    const el = title || section;
    const rect = el.getBoundingClientRect();
    return rect.top + window.scrollY;
  }
  function rebuildDepthAnchors() {
    depthAnchors = DEPTH_POINTS.map(p => ({ y: sectionTitleTop(p.id), depth: p.depth })).sort((a, b) => a.y - b.y);
  }
  function depthAtViewport() {
    if (!depthAnchors.length) rebuildDepthAnchors();
    if ((window.scrollY || 0) <= 0) return 0;
    const refY = window.scrollY + (window.innerHeight / 2) - headerPx() / 2;
    if (refY <= depthAnchors[0].y) return depthAnchors[0].depth;
    const slowdown = window.innerHeight / 800;
    for (let i = 0; i < depthAnchors.length - 1; i++) {
      const a = depthAnchors[i], b = depthAnchors[i + 1];
      if (refY >= a.y && refY < b.y) {
        const t = (refY - a.y) / Math.max(1, (b.y - a.y) * slowdown);
        const d = a.depth + (b.depth - a.depth) * Math.min(1, t);
        return Math.round(d / 10) * 10;
      }
    }
    return depthAnchors[depthAnchors.length - 1].depth;
  }
  function deepestDepth() {
    if (!depthAnchors.length) rebuildDepthAnchors();
    return depthAnchors[depthAnchors.length - 1].depth;
  }

  const resizeObs = new ResizeObserver(() => rebuildDepthAnchors());
  resizeObs.observe(document.documentElement);
  window.addEventListener('load', rebuildDepthAnchors);
  window.addEventListener('resize', rebuildDepthAnchors);
  document.addEventListener('DOMContentLoaded', rebuildDepthAnchors);
  window.addEventListener('load', () => {
    document.querySelectorAll('img').forEach(img => {
      if (!img.complete) img.addEventListener('load', rebuildDepthAnchors, { once: true });
    });
  });

  /* =========================================================
    DEPTH METER
    ========================================================= */
  (function initScrollDepth(){
    const HIDE_MS = 600;

    let meter = document.getElementById('depth-meter');
    if (!meter) {
      meter = document.createElement('div');
      meter.id = 'depth-meter';
      meter.innerHTML = '<span class="depth-value">0</span> m';
      document.body.appendChild(meter);
    }
    const valueEl = meter.querySelector('.depth-value') || meter;

    let hideTimer = null;
    function showMeter() {
      meter.classList.add('is-visible');
      if (hideTimer) clearTimeout(hideTimer);
      hideTimer = setTimeout(() => meter.classList.remove('is-visible'), HIDE_MS);
    }
    function updateDepth() {
      const d = depthAtViewport();
      valueEl.textContent = String(d);
      showMeter();
    }

    updateDepth();
    if (window.__ScrollBus) window.__ScrollBus.subscribe(updateDepth);
  })();

  /* =========================================================
    FISHING GAME
    ========================================================= */
  (function fishingGame() {
    const fishOptions = [
      'assets/img/skate.png',
      'assets/img/fluke.png',
      'assets/img/seaBass.png',
      'assets/img/blueFish.png',
      'assets/img/bluefin.png',
      'assets/img/stripedBass.png'
    ];
    const LEGENDARY_FISH_SRC = 'assets/img/mahi.png';
    const LEGENDARY_CHANCE = 0.1;
    const MAX_TILT_DEG = 15;
    const LEGENDARY_FILTER = 'drop-shadow(0 0 6px rgba(50,205,50,.9)) drop-shadow(0 0 12px rgba(0,255,255,.75))';

    const boatWrap  = document.getElementById('boat-wrap');
    const hookWrap  = document.getElementById('hook-wrap');
    const boatCatch = document.getElementById('boat-catch');

    if (!boatWrap || !hookWrap || !boatCatch || !window.__ScrollBus) return;

    function randomFrom(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
    function randomTilt()    { return (Math.random() * MAX_TILT_DEG * 2) - MAX_TILT_DEG; }

    function generateCatch() {
      const legendary = LEGENDARY_FISH_SRC && Math.random() < LEGENDARY_CHANCE;
      const src = legendary ? LEGENDARY_FISH_SRC : randomFrom(fishOptions);
      const tilt = randomTilt();
      return { src, tilt, legendary };
    }

    let carrying = false;
    let currentCatch = null;

    function spawnSwimmingFish() {
      if (carrying) return;
      currentCatch = generateCatch();

      const swim = document.createElement('img');
      swim.src = currentCatch.src;
      swim.alt = 'Swimming fish';
      swim.className = 'fish-swim';
      if (currentCatch.legendary) swim.style.filter = LEGENDARY_FILTER;
      document.body.appendChild(swim);

      let x = -200;
      let y = window.innerHeight * 0.5;
      let frame = 0;

      function animate() {
        const hookRect = hookWrap.getBoundingClientRect();
        const targetX = hookRect.left + hookRect.width * 0.5 - 100;
        const targetY = hookRect.top;

        const dx = targetX - x;
        const dy = targetY - y;
        const dist = Math.sqrt(dx * dx + dy * dy);

        if (dist < 40) { swim.remove(); hookFish(); return; }

        const step = 15;
        x += (dx / dist) * step;
        y += (dy / dist) * step;

        const wiggle = Math.sin(frame / 8) * 15;
        swim.style.left = (x + wiggle) + 'px';
        swim.style.top  = y + 'px';

        frame++;
        requestAnimationFrame(animate);
      }
      animate();
    }

    function hookFish() {
      if (carrying || !currentCatch) return;

      const wrap = document.createElement('div');
      wrap.className = 'on-hook-rot';
      wrap.style.willChange = 'transform';
      wrap.style.transform = 'translateZ(0)';

      const img = document.createElement('img');
      img.src = currentCatch.src;
      img.alt = 'Fish on hook';
      img.className = 'fish on-hook';
      if (currentCatch.legendary) img.style.filter = LEGENDARY_FILTER;

      wrap.appendChild(img);
      hookWrap.appendChild(wrap);
      carrying = true;
    }

    function landFish() {
      if (!carrying || !currentCatch) return;

      const rotWrap = hookWrap.querySelector('.on-hook-rot');
      if (rotWrap) { rotWrap.style.transform = 'none'; rotWrap.remove(); }

      const stack = document.createElement('img');
      stack.src = currentCatch.src;
      stack.alt = 'Caught fish';
      stack.className = 'fish stack';
      stack.style.setProperty('--tilt', `${currentCatch.tilt.toFixed(1)}deg`);
      stack.style.setProperty('--i', boatCatch.children.length);
      if (currentCatch.legendary) stack.style.filter = LEGENDARY_FILTER;

      boatCatch.appendChild(stack);
      boatCatch.setAttribute('aria-label', `Caught fish: ${boatCatch.children.length}`);

      carrying = false;
      currentCatch = null;
    }

    let lastDepth = -1;
    function onScrollUpdate() {
      const d = depthAtViewport();
      if (d !== lastDepth) {
        if (d >= deepestDepth() && !carrying) { spawnSwimmingFish(); }
        if (d <= 0 && carrying) { landFish(); }
        lastDepth = d;
      }
    }

    // Hooked fish rotation driven by smoothed scroll velocity
    function rotateHookedFish(vSmoothed) {
      const rotWrap = hookWrap.querySelector('.on-hook-rot');
      if (!rotWrap) return;
      const angle = Math.max(-70, Math.min(70, vSmoothed * 70 * 16));
      rotWrap.style.transform = `rotate(${angle.toFixed(1)}deg) translateZ(0)`;
    }

    window.__ScrollBus.subscribe(({ vSmoothed }) => {
      rotateHookedFish(vSmoothed);
      onScrollUpdate();
    });

    // Initial pass
    onScrollUpdate();
  })();
  </script>

</body>
</html>

